<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Lobby - QCasino</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="lobby.css">
</head>
<body>

<div class="app">

  <!-- TOPO -->
  <header class="topbar">
    <div class="logo">ğŸ© QCASINO</div>
    <div class="user-info">
  ğŸ‘¤ <span id="nomeUsuario">---</span><br>
  ğŸ’° Saldo: <span id="saldo">0</span> crÃ©ditos
</div>

<button onclick="sair()" class="btn danger">ğŸšª Sair</button>
  </header>

  <!-- BANNER -->
  <section class="lobby-banner">
    <h1>ğŸ° Bem-vindo ao QCASINO</h1>
    <p>Aposte com inteligÃªncia. A sorte gira rÃ¡pido.</p>
  </section>

  <!-- JOGOS -->
  <section class="games">

    <div class="game-card">
      <div class="icon">ğŸ’</div>
      <h3>CaÃ§a-NÃ­quel</h3>
      <p>Gire e ganhe prÃªmios</p>
      <button>Jogar</button>
    </div>

    <div class="game-card">
      <div class="icon">ğŸ²</div>
      <h3>Dice</h3>
      <p>Aposte no nÃºmero certo</p>
      <button>Jogar</button>
    </div>

    <div class="game-card">
      <div class="icon">ğŸƒ</div>
      <h3>Blackjack</h3>
      <p>21 ou nada</p>
      <button>Jogar</button>
    </div>

    <div class="game-card">
      <div class="icon">ğŸ’</div>
      <h3>Roleta</h3>
      <p>Vermelho ou Preto</p>
      <button>Jogar</button>
    </div>

  </section>

</div>
<!-- ÃUDIOS -->
<audio id="sound-bg" src="sounds/casino.mp3" loop></audio>
<audio id="sound-hover" src="sounds/hover.mp3"></audio>
<audio id="sound-click" src="click.mp3"></audio>

<button id="soundToggle" class="sound-btn">
  ğŸ”Š Som
</button>

<script src="sounds.js"></script>

<script type="module">
  import { auth, db } from "./firebase.js";
  import { onAuthStateChanged, signOut } from
    "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { doc, getDoc } from
    "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "login.html";
      return;
    }

    const ref = doc(db, "users", user.uid);
    const snap = await getDoc(ref);

    if (snap.exists()) {
      const dados = snap.data();
      document.getElementById("nomeUsuario").innerText = dados.nome;
      document.getElementById("saldo").innerText = dados.saldo;
    }
  });

  window.sair = async () => {
    await signOut(auth);
    window.location.href = "login.html";
  };
</script>

<script type="module">
  import { auth, db } from "./firebase.js";
  import { onAuthStateChanged, signOut } from
    "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { doc, getDoc } from
    "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "login.html";
      return;
    }

    try {
      const ref = doc(db, "usuarios", user.uid);
      const snap = await getDoc(ref);

      if (snap.exists()) {
        const dados = snap.data();
        document.getElementById("nomeUsuario").innerText = dados.nome;
        document.getElementById("saldo").innerText = dados.saldo;
      } else {
        console.log("Documento do usuÃ¡rio nÃ£o existe");
      }

    } catch (err) {
      console.error("Erro ao buscar dados:", err);
    }
  });

  window.sair = async () => {
    await signOut(auth);
    window.location.href = "login.html";
  };
</script>

  
<script type="module">
  import { auth } from "./firebase.js";
  import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  onAuthStateChanged(auth, user => {
    if (!user) {
      // nÃ£o estÃ¡ logado
      window.location.href = "login.html";
    }
  });

  // botÃ£o sair
  window.sair = async () => {
    await signOut(auth);
    window.location.href = "login.html";
  };
</script>
<script>
  history.pushState(null, null, location.href);
  window.onpopstate = () => {
    history.go(1);
  };
</script>

</body>
</html>

